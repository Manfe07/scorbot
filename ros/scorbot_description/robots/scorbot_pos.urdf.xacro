<?xml version="1.0"?>
<robot
  xmlns:xacro="http://www.ros.org/wiki/xacro"
  name="scorbot">

  <!-- ROS Controllers -->
  <xacro:ros_control prefix="scorbot" />
  <!-- URDF Materials -->
  <xacro:include filename="$(find scorbot_description)/urdf/materials.urdf.xacro" />
  <!-- Gazebo macros -->
  <xacro:include filename="$(find scorbot_description)/urdf/gazebo.urdf.xacro" />

  <!-- Gazebo elements -->
  <!-- Gazebo Links material -->
  <xacro:gazebo_link link="base" color="White" />
  <xacro:gazebo_link link="body" color="White" />
  <xacro:gazebo_link link="upper_arm" color="White" />
  <xacro:gazebo_link link="forearm" color="White" />
  <xacro:gazebo_link link="flange" color="DarkGrey" />
  <xacro:gazebo_link link="tool" color="DarkGrey" />
  <xacro:gazebo_link link="right_finger" color="DarkGrey" />
  <xacro:gazebo_link link="left_finger" color="DarkGrey" />

  <!-- Transmissions -->
  <xacro:joint_pos_transmission joint="base"/>
  <xacro:joint_pos_transmission joint="shoulder"/>
  <xacro:joint_pos_transmission joint="elbow"/>
  <xacro:joint_pos_transmission joint="pitch"/>
  <xacro:joint_pos_transmission joint="roll"/>
  <xacro:joint_pos_transmission joint="right_finger_tras"/>
  <xacro:joint_pos_transmission joint="left_finger_tras"/>

  <!-- Constants -->
  <xacro:property name="M_PI" value="3.14159265359" />
  <xacro:property name="DEG2RAD" value="${M_PI/180.0}" />

  <!-- Joint limits in radians -->
  <xacro:property name="base_upper_limit" value="${ 250.0/2*DEG2RAD}" />
  <xacro:property name="base_lower_limit" value="${-250.0/2*DEG2RAD}" />

  <xacro:property name="shoulder_upper_limit" value="${ 170.0/2*DEG2RAD}" />
  <xacro:property name="shoulder_lower_limit" value="${-170.0/2*DEG2RAD}" />

  <xacro:property name="elbow_upper_limit" value="${ 225.0/2*DEG2RAD}" />
  <xacro:property name="elbow_lower_limit" value="${-225.0/2*DEG2RAD}" />

  <xacro:property name="pitch_upper_limit" value="${ 180.0/2*DEG2RAD}" />
  <xacro:property name="pitch_lower_limit" value="${-180.0/2*DEG2RAD}" />

  <xacro:property name="roll_upper_limit" value="${ 360.0/2*DEG2RAD}" />
  <xacro:property name="roll_lower_limit" value="${-360.0/2*DEG2RAD}" />

  <xacro:property name="finger_upper_limit" value="${ 0.0165}" />
  <xacro:property name="finger_lower_limit" value="${-0.0165}" />
  
  <!-- * * * Define World Link to fix the arm's base to the world * * * -->
  <link name="world"/>
  <link
    name="base">
    <inertial>
      <origin
        xyz="-5.6661E-09 -4.8129E-10 0.049865"
        rpy="0 0 0" />
      <mass
        value="3.5594" />
      <inertia
        ixx="0.025688"
        ixy="-2.4368E-10"
        ixz="1.2537E-10"
        iyy="0.025688"
        iyz="-3.2961E-12"
        izz="0.028476" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/base.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.49804 0.49804 0.49804 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/base.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="body">
    <inertial>
      <origin
        xyz="-0.072272 -0.0016694 0.145"
        rpy="0 0 0" />
      <mass
        value="9.7868" />
      <inertia
        ixx="0.05511"
        ixy="-0.001985"
        ixz="0.0061208"
        iyy="0.12037"
        iyz="-0.00070806"
        izz="0.10965" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/body.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.49804 0.49804 0.49804 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/body.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base"
    type="revolute">
    <origin
      xyz="0 0 0.17"
      rpy="0 0 0" />
    <parent
      link="base" />
    <child
      link="body" />
    <axis
      xyz="0 0 1" />
    <limit effort="30" velocity="1.0" lower="${base_lower_limit}" upper="${base_upper_limit}" />
  </joint>
  <link
    name="upper_arm">
    <inertial>
      <origin
        xyz="0.040893 -0.046847 -6.337E-05"
        rpy="0 0 0" />
      <mass
        value="5.4535" />
      <inertia
        ixx="0.010363"
        ixy="-0.0023486"
        ixz="3.9183E-05"
        iyy="0.1835"
        iyz="-4.8475E-07"
        izz="0.18016" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/upper_arm.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.49804 0.49804 0.49804 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/upper_arm.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="shoulder"
    type="revolute">
    <origin
      xyz="0.05 -0.096 0.1885"
      rpy="0 0 0" />
    <parent
      link="body" />
    <child
      link="upper_arm" />
    <axis
      xyz="0 1 0" />
    <limit effort="30" velocity="1.0" lower="${shoulder_lower_limit}" upper="${shoulder_upper_limit}" />
  </joint>
  <link
    name="forearm">
    <inertial>
      <origin
        xyz="0.073997 0.038242 4.5577E-11"
        rpy="0 0 0" />
      <mass
        value="2.194" />
      <inertia
        ixx="0.0025816"
        ixy="5.645E-05"
        ixz="1.195E-11"
        iyy="0.024687"
        iyz="4.1344E-12"
        izz="0.02443" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/forearm.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.49804 0.49804 0.49804 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/forearm.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="elbow"
    type="revolute">
    <origin
      xyz="0.3 0.021 0"
      rpy="0 0 0" />
    <parent
      link="upper_arm" />
    <child
      link="forearm" />
    <axis
      xyz="0 -1 0" />
    <limit effort="30" velocity="1.0" lower="${elbow_lower_limit}" upper="${elbow_upper_limit}" />
  </joint>
  <link
    name="flange">
    <inertial>
      <origin
        xyz="0.0069957 -0.02 5.5511E-17"
        rpy="0 0 0" />
      <mass
        value="0.24441" />
      <inertia
        ixx="0.00014819"
        ixy="1.6491E-20"
        ixz="-1.653E-19"
        iyy="0.00028003"
        iyz="5.3591E-21"
        izz="0.00021086" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/flange.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.10196 0.10196 0.10196 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/flange.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="pitch"
    type="revolute">
    <origin
      xyz="0.25 0.054 0"
      rpy="0 0 0" />
    <parent
      link="forearm" />
    <child
      link="flange" />
    <axis
      xyz="0 -1 0" />
    <limit effort="30" velocity="1.0" lower="${pitch_lower_limit}" upper="${pitch_upper_limit}" />
  </joint>
  <link name="tool" >
    <inertial>
      <origin
        xyz="0.0594513 0 -0.0000016"
        rpy="0 0 0" />
      <mass
        value="0.588070" />
      <inertia
        ixx="0.00054607"
        ixy="1807475E-17"
        ixz="-4052507904E-17"
        iyy="0.00085718"
        iyz="291803.25E-17"
        izz="0.00107592" />
    </inertial>
	<visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/gripper_base.STL"  />
      </geometry>
      <material
        name="">
        <color
          rgba="0.10196 0.10196 0.10196 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/gripper_base.STL"  />
      </geometry>
    </collision>
  </link>
  <joint
    name="roll"
    type="revolute">
    <origin
      xyz="0.054 -0.02 0"
      rpy="0 0 0" />
    <parent
      link="flange" />
    <child
      link="tool" />
    <axis
      xyz="1 0 0" />
    <limit effort="30" velocity="1.0" lower="${roll_lower_limit}" upper="${roll_upper_limit}" />
  </joint>
 <link name="right_finger" >
    <inertial>
      <origin
        xyz="0.0219266 0.0154690 0.0037881"
        rpy="0 0 0" />
      <mass
        value="0.019350" />
      <inertia
        ixx="545823883264E-17"
        ixy="-263685619712E-17"
        ixz="133104623616E-17"
        iyy="675516317696E-17"
        iyz="88172740608E-17"
        izz="911899033600E-17" />
    </inertial>
	<visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/right_finger.STL"/>
      </geometry>
      <material
        name="">
        <color
          rgba="0.10196 0.10196 0.10196 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/right_finger.STL" />
      </geometry>
    </collision>
  </link>
 <joint
    name="right_finger_tras"
    type="prismatic">
    <origin
      xyz="0.118 0 0"
      rpy="0 0 0" />
    <parent
      link="tool" />
    <child
      link="right_finger" />
    <axis
      xyz="0 1 0" />
    <limit effort="30" velocity="1.0" lower="${finger_lower_limit}" upper="${finger_upper_limit}" />
  </joint>
<link name="left_finger" >
    <inertial>
      <origin
        xyz="0.0219266 -0.0154690 -0.0037881"
        rpy="0 0 0" />
      <mass
        value="0.019350" />
      <inertia
        ixx="545823883264E-17"
        ixy="263685619712E-17"
        ixz="-133104623616E-17"
        iyy="675516317696E-17"
        iyz="88172740608E-17"
        izz="911899033600E-17" />
    </inertial>
	<visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/left_finger.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.10196 0.10196 0.10196 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://scorbot_description/meshes/left_finger.STL" />
      </geometry>
    </collision>
  </link>
<joint
    name="left_finger_tras"
    type="prismatic">
    <origin
      xyz="0.118 0 0"
      rpy="0 0 0" />
    <parent
      link="tool" />
    <child
      link="left_finger" />
    <axis
      xyz="0 1 0" />
    <limit effort="30" velocity="1.0" lower="${finger_lower_limit}" upper="${finger_upper_limit}" />
  </joint>
  <joint name="fixed" type="fixed">
    <parent link="world"/>
    <child link="base"/>
  </joint>
</robot>
